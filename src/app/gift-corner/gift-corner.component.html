<div class="gift-corner-container">
  <!-- Animated Background -->
  <div class="animated-background">
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="gradient-orb orb-3"></div>
  </div>

  <!-- Floating Elements -->
  <div class="floating-elements">
    @for (emoji of floatingEmojis; track emoji; let i = $index) {
      <div class="floating-emoji" [style.animation-delay]="i * 0.5 + 's'">
        {{ emoji }}
      </div>
    }
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header Section -->
    <div class="gift-header">
      <div class="header-content">
        <h1 class="gift-title">
          <span class="sparkle">✨</span>
          Special Wishes
          <span class="sparkle">✨</span>
        </h1>
        <p class="gift-subtitle">Your personalized collection of special moments 💫</p>
        
        <!-- Progress Section -->
        <div class="progress-section">
          <div class="progress-stats">
            <div class="stat-item">
              <span class="stat-number">{{ redeemedGifts }}</span>
              <span class="stat-label">Redeemed</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">{{ totalGifts - redeemedGifts }}</span>
              <span class="stat-label">Available</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">{{ totalGifts }}</span>
              <span class="stat-label">Total</span>
            </div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="getGiftProgress()"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Wish Section -->
    <div class="main-wish-section">
      <div class="wish-header">
        <h2 class="wish-title">
          <span class="wish-emoji">💝</span>
          Love & Care
        </h2>
        <p class="wish-description">Special moments crafted just for you</p>
      </div>
      
      <div class="wishes-grid">
        @for (gift of mainWishes; track gift.id) {
          <div
            class="wish-card"
            [class.redeemed]="gift.redeemed"
            [class]="'wish-card ' + gift.color"
            (click)="onGiftClick(gift)"
            [attr.aria-label]="gift.title + ' - ' + gift.description"
          >
            <div class="wish-emoji">{{ gift.emoji }}</div>
            <h3 class="wish-card-title">{{ gift.title }}</h3>
            <p class="wish-card-description">{{ gift.description }}</p>
            @if (gift.redeemed) {
              <div class="wish-status">
                <span class="redeemed-badge">✨ Redeemed</span>
                <span class="redeem-date">{{ gift.redeemDate | date:'short' }}</span>
              </div>
            }
            @if (!gift.redeemed) {
              <div class="wish-overlay">
                <span class="click-hint">Tap to redeem! 🎯</span>
              </div>
            }
          </div>
        }
      </div>
    </div>

    <!-- Coming Soon Section -->
    <div class="coming-soon-section">
      <div class="coming-soon-card">
        <div class="coming-soon-icon">🚀</div>
        <h3>More Wishes Coming Soon!</h3>
        <p>We're preparing more special moments for you</p>
        <div class="loading-dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Control Panel -->
  <div class="control-panel">
    <button class="control-btn" (click)="resetAllGifts()" title="Reset all wishes">
      <span class="btn-icon">🔄</span>
    </button>
    <button class="control-btn" (click)="celebrationMode = !celebrationMode" title="Toggle celebration">
      <span class="btn-icon">🎉</span>
    </button>
  </div>

  <!-- Redeem Modal -->
  @if (showRedeemModal) {
    <div class="redeem-modal" (click)="closeModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>✨ Redeem Your Wish! ✨</h2>
          <button class="close-btn" (click)="closeModal()">×</button>
        </div>
        @if (selectedGift) {
          <div class="modal-body">
            <div class="gift-preview">
              <div class="gift-emoji-large">{{ selectedGift.emoji }}</div>
              <h3>{{ selectedGift.title }}</h3>
              <p>{{ selectedGift.description }}</p>
            </div>
            <div class="modal-actions">
              <button class="redeem-btn" (click)="redeemGift()">
                <span class="btn-text">Redeem Now!</span>
                <span class="btn-emoji">✨</span>
              </button>
              <button class="cancel-btn" (click)="closeModal()">
                Maybe Later
              </button>
            </div>
          </div>
        }
      </div>
    </div>
  }

  <!-- Celebration Overlay -->
  @if (celebrationMode) {
    <div class="celebration-overlay">
      <div class="celebration-content">
        <h2>🎊 Wish Granted! 🎊</h2>
        <p>Enjoy your special moment! 💖</p>
        <div class="celebration-emojis">
          @for (emoji of ['🎉', '✨', '🎁', '💝', '🌟', '💖', '🎈', '🏆']; track emoji) {
            <span>{{ emoji }}</span>
          }
        </div>
      </div>
    </div>
  }
</div>
